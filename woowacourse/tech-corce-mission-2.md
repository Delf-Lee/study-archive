# 우아한 테크코스 프리코스 2주차 과정 및 느낀점
- 2주차 미션: 자동차 경주 게임
- [origin repository](https://github.com/Delf-Lee/java-racingcar/tree/delf)
 
## 구현 중 고찰
해당 항목은 길어져 [아래](#구현-중-고민과-의문)에서 언급
## 과정
- `자동차 전진 결정자`(이하 `CarAdvanceDecider`) 클래스 작성
- 경주 기능 구현
  - `Car` 클래스 구현
    - 이름과 현재 위치, 그리고 `CarAdvanceDecider`의 구현체를 가진다.
    - `CarAdvanceDecider`에 따라 전진과 정지를 결정하여 위치를 이동하는 메서드를 구현.
    - 현재 위치를 출력해주는 `toString`메서드를 오버라이딩.
  - `Track` 클래스 구현
    - 트랙 위의 모든 자동차들이 1회 전진할 기회가 주어지는 `next`메서드 구현
    - 자동으로 경기가 끝날때 까지 `next`메서드를 반복 실행하는 `excuteRaceUntilEnd`메서드 구현
    - 승자 결과를 반환하는 `getWinners`메서드 구현
    - 현재 트랙의 상태를 출력하기 위한 `toString`메서드를 오버라이딩.
  - 경주를 진행할 `RaceSimulator` 클래스 구현
- 입출력 기능 구현
  - 레이싱 게임에 필요한 변수 입력을 받는 인터페이스 `RaceIOInterface` 구현
  - 위의 인터페이스를 구현하여 콘솔에서 조작 가능한 클래스 `ConsoleIOInterface` 작성
- 예외처리
  - 사용자 입력에 대한 예외처리(이름과 시도 횟수에 대한 제한)
- 코드 리펙토링
  - 주석 추가
  - 예외 입력 처리 루틴 변경
  - `CarAdvanceDecider` 매개 변수를 직관적으로 변경


## 구현 중 고민과 의문

### 난수 생성기의 필요성에 대한 고민
- 의문
  - 과연 이 기능을 탑클래스로 만들 필요가 있을까?
  - 그냥 `Car`클래스의 메서드에서 자체적으로 난수를 발생해서 전진하면 되지 않을까?
- **필요할 것 같다.**
  - 생각해보니 지금의 요구 사항에서는 "난수의 결과로" 전진/정지를 결정하지만, 다른게 결정 요인이 될 수 있잖아?
  - 빼자. 탑클래스로.


### `toString`메서드의 오버라이딩에 대하여
- 의문
  - 과연 `Car`와 `Track`을 나타내기 위해 해당 클래스의 `toString`메서드를 오버라이딩 해도 될까?
    - `toString`메서드는 엄밀히 말하면 이 객체를 "보여주는" 기능이다.
    - 이런 presentation 기능이 과연 해당 domain 클래스에 필요한 기능일까?
  - 필요 없는 고민일지도 모른다. 사실 요구사항 정도와는 전혀 동떨어진 고민이다.
    - 당연 콘솔 입출력 밖에 없으니까...
    - **구조** 관점이 아니라 그냥 **읽기 편한**, 또는 **보기 좋은** 코드는 오히려 깔끔하게 `toString`메서드를 오버라이딩 하는 것일 수 있다.
- **오버라이딩 해도 괜찮을 것 같다.**
  - 어찌됐든 문자열은 가장 간단한 표현 요소로써, 기본적으로 있어야 하는 기능이라고 생각한다.
    - `toString`은 해당 **인스턴스**의 **상태**를 문자열로 표현하는 메서드이다.
    - 이 `Car` 혹은 `Tarck` 인스턴스를 보여줄 방법은 여러가지가 있겠지만, 요구사항에서는 (콘솔에서) 문자열로만 표현하면 되니, 따로 계층을 따서 거기서 `toString`을 이용하면 될 것 같다.
- 2차 의문
  - 정말? 정말 필요할까? 위에 말대로라면 그냥, `String[]`을 넘겨주고 presentation 레이어에서 '알아서 출력해라!'라고 던져주는게 맞지 않을까?
  - `toString`메서드에서 콤마고 콜론이고 다 찍어서 줘야할까? 이게 이 domain에서...?
- 결국 무엇 하나로 정해서 구현은 하겠지만, 무엇인 더 옳은 선택지인지는 판단하지 못하겠다.
  - 일단 `toString`을 오버라이딩 하자...

### 테스트에 대하여
- 어디까지, 무엇을 테스트를 해야되는걸까?
  - 대표적으로 내가 따로 나눠 구현한 "자동차가 전진할지 정지할지 결정해주는 클래스인 `CarAdvanceDecider`.
    - `public`으로 공개된 메서드는 그저 `boolean`을 뱉는 `getTrueOrFalseByChance`메서드 밖에 없다. 그것도 "확률적으로"
  - 모든 과정이 근본적으로 이 메서드에 의존적이다.
    - 이걸 어떻게 테스트하지?
  - **mock을 사용해보면 어떨까?**

### 각 클래스의 경계에 대하여
- 어떤 클래스나 메서드는 최소한의 기능을 가져야 한다. 어떤 모듈은 하나의 책임을 맡아야한다.
  - 라는 이야기를 많이 들어왔다. 흔히 말하는 객체지향의 SOLID 원칙 중 하나인 SRP도 이런걸 말하고 있다.
- 이걸 명확히 하는게 참 힘든 것 같다. 아마 경험이 쌓이면 조금 더 수월하고 판단하고 작성할 수 있지 않을까 싶다.
  - 대표적으로 콘솔에 나타낼 입력 안내 문구 "경주할 자동차 이름을 입력하세요." 등과 같은 문자열은 어디에 저장하는 편이 좋을까?
    - 입출력 클래스? 로직 클래스? 아니면 따로 resource로 관리를 해야할까...
  - 지금은 입출력 클래스에 넣는게 맞다고 생각한다.

### 예외처리에 대하여
- `Car` 클래스의 name 필드의 길이 제한이 있다.
  - 이 길이 대한 변수는 어디 있는게 옳을까?
  - 가장 쉽게 생각할 수 있는건 `Car` 내부겠지.
- 그럼 이 예외를 어디서 처리할까?
  - 처음에 생각한건 `Car`의 생성자. 타당하지 않은가?
- 하지만 예외를 던지고, 던지고, 던지고, 던져야한다.
  - **이름(변수)** 을 입력을 받고, 입출력 클래스에서 로직 클래스로, `Track`클래스로, `Car`클래스로...
  - **예외**가 발생하면 다시 `Car`클래스에서 `Track`클래스, 로직 클래스, 입출력 클래스로 예외를 던져야한다.
  - 좋다. 이건 상관 없다고 하자.
- 문제는 예외 발생시 재입력을 시도 시킬 때 발생한다.
  - 이름을 입력하고 횟수를 입력하게 되어있는데, 횟수 입력에서 예외가 발생하면 다시 이름을 입력하게끔 된다.
  - 이런 증상을 막기 위해서 생각한 방법 중 하나는 플래그든, 어떤 조건이든 그에 대한 변수를 추가하고, 조건이 만족하면 입력을 패스하는 것.
- 예외를 `Car`가 아닌 입출력 클래스에서 한다면?
  - 문제는 쉬워지고 깔끔하진다.
  - 하지만 다른 입출력 클래스가 추가된다면, 다시 예외처리에 대한 구현을 해줘야한다.
  - 이게... 옳은가?

### 패키지 구조
음...

### 클래스와 메서드에 이름 짓기
어렵다.